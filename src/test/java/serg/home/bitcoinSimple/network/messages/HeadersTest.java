package serg.home.bitcoinSimple.network.messages;

import org.junit.jupiter.api.Test;
import serg.home.bitcoinSimple.common.Bytes;
import serg.home.bitcoinSimple.protocol.BtcMessage;

import java.io.IOException;

import static org.junit.jupiter.api.Assertions.*;

class HeadersTest {
    private static final String HEADERS = "080100000043497FD7F826957108F4A30FD9CEC3AEBA79972084E90EAD01EA330900000000BAC8B0FA927C0AC8234287E33C5F74D38D354820E24756AD709D7038FC5F31F020E7494DFFFF001D03E4B672000100000006128E87BE8B1B4DEA47A7247D5528D2702C96826C7A648497E773B800000000E241352E3BEC0A95A6217E10C3ABB54ADFA05ABB12C126695595580FB92E222032E7494DFFFF001D00D23534000100000020782A005255B657696EA057D5B98F34DEFCF75196F64F6EEAC8026C0000000041BA5AFC532AAE03151B8AA87B65E1594F97504A768E010C98C0ADD79216247186E7494DFFFF001D058DC2B6000100000010BEFDC16D281E40ECEC65B7C9976DDC8FD9BC9752DA5827276E898B000000004C976D5776DDA2DA30D96EE810CD97D23BA852414990D64C4C720F977E651F2DAAE7494DFFFF001D02A976400001000000DDE5B648F594FDD2EC1C4083762DD13B197BB1381E74B1FFF90A5D8B00000000B3C6C6C1118C3B6ABAA17C5AA74EE279089AD34DC3CEC3640522737541CB016818E8494DFFFF001D02DA84C00001000000A1213BD4754A6606444B97B5E8C46E9B7832773FF434BD5F87AC45BC00000000D1E7026986A9CD247B5B85A3F30ECBABB6D61840D0ABB81F905C411D5FC145E831E8494DFFFF001D004138F900010000007B0A09F26FDDE2C432167D8349681C7801D0128F4DFAE4DC5E68336600000000C1D71F59CE4419C793EB829380A41DC1AD48C19FCB0083B8F67094D5CAE263AD81E8494DFFFF001D004DDAD50001000000A62BC0C08AFC1D12E6C6A7EB4A464C848190AC0E44123D5FA63A9EE2000000000214335CDE9EDEB6AA0195F68C08E5E46B07043E24AEFF51FD9A3FF992CE6976A0E8494DFFFF001D02F3392700";

    @Test
    void decode() throws IOException {
        Headers headers = new BtcMessage(new Bytes(HEADERS)).headers();
        assertEquals(8, headers.blockHeaders().size());
    }
}